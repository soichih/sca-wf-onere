<div class="container">
    <h2>Create New Container</h2>

    <div class="page">
        <p class="alert alert-warning" ng-if="!resources.onere">No resource is available to submit your workflow. Please check your resource status.</p>
        <form ng-submit="submit()" class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-2 control-label">Description</label>
                <div class="col-sm-10">
                    <textarea ng-model="instance.config.desc" class="form-control" placeholder="Description for this submission" required></textarea>
                </div>
            </div>

            <!--
            <div class="form-group">
                <label class="col-sm-2 control-label">Diffusion Data</label>
                <div class="col-sm-10">
                    <ui-select ng-model="instance.config.diff">
                        <ui-select-match>{{$select.selected.filename}}</ui-select-match>
                        <ui-select-choices repeat="file in diffs">
                            {{file.filename}}
                        </ui-select-choices>
                    </ui-select>
                    <a href="javascript:void(0)" ng-click="openpage('input/diff');">Add</a>
                </div>
            </div>
            -->

            <!--
            <div class="form-group">
                <label class="col-sm-2 control-label">.b File</label>
                <div class="col-sm-10">
                    <ui-select ng-model="instance.config.b">
                        <ui-select-match>{{$select.selected.filename}}</ui-select-match>
                        <ui-select-choices repeat="file in bs">
                            {{file.filename}}
                        </ui-select-choices>
                    </ui-select>
                    <a href="javascript:void(0)" ng-click="openpage('input/b');">Add</a>
                </div>
            </div>
            -->

            <!--
            <div class="form-group">
                <label class="col-sm-2 control-label">WM Mask</label>
                <div class="col-sm-10">
                    <ui-select ng-model="instance.config.mask">
                        <ui-select-match>{{$select.selected.filename}}</ui-select-match>
                        <ui-select-choices repeat="file in masks">
                            {{file.filename}}
                        </ui-select-choices>
                    </ui-select>
                    <a href="javascript:void(0)" ng-click="openpage('input/mask');">Add</a>
                </div>
            </div>
            -->

            <div class="form-group">
                <label class="col-sm-2 control-label">Data</label>
                <div class="col-sm-10">
                    <tabset active="instance.config.active_tab">
                        <tab index="0" heading="Upload">
                            <br>
                            <sca-wf-uploader instid="instance._id" taskid="appconf.upload_task_id" files="files"></sca-wf-uploader>
                            <!--
                            <div class="pull-right">
                                <button type="button" class="btn btn-primary" ng-click="doneupload(files)" ng-if="files.length > 0">Next</button>
                            </div>
                            -->
                        </tab>
                        <tab index="1" heading="From URL">
                            <br>
                            <label for="subject">URL</label>
                            <input type="text" class="form-control" ng-model="url" placeholder="http://somewhere.com/somepath/some.nifti">

                            <div class="well">
                                <p>You can use following URLs to test</p>
                                <ul ng-repeat="sample in appconf.sample_urls">
                                    <li>
                                            <b>{{sample.name}}</b>
                                            <p>{{sample.desc}}</p>
                                            <a href="javascript:void(0);" ng-click="$parent.url = sample.url">{{sample.url}}</a>
                                    </li>
                                </ul>
                            </div>
                            <!--
                            <div class="pull-right">
                                <button type="button" class="btn btn-primary" ng-click="fromurl(url)" ng-disabled="!url">Download</button>
                            </div>
                            -->
                        </tab>
                        <tab index="2" heading="From SDA">
                            <br>
                            <p class="alert alert-warning">TODO..</p>
                        </tab>
                    </tabset>
                </div><!--col-->
            </div><!--form-group-->

            <div class="form-group">
                <label class="col-sm-2 control-label">Application</label>
                <div class="col-sm-10">
                    <div class="row">
                        <div class="col-sm-6" ng-repeat="app in appconf.applications">
                            <div class="checkbox">
                                <label> <input type="checkbox" ng-model="instance.config.applications[app.id]"> {{app.label}} </label>
                            </div>
                        </div>
                    </div><!--row for applications-->
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <div class="pull-right">
                        <button class="btn btn-primary">Create Container</button>
                    </div>
                </div>
            </div>
            <pre ng-show="appconf.debug">{{instance|json}}</pre>
        </form>
    </div><!--page-->
</div>
