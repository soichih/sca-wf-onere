<div class="fixed-top" style="padding-left: 80px">
    <div class="container">
        <h2 style="position: relative; left: -10px;">
            <i class="fa fa-reply" aria-hidden="true" ng-click="back()"></i>&nbsp;&nbsp;&nbsp;
            <i class="fa fa-info-circle" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;
            <i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;
            <i class="fa fa-pencil" aria-hidden="true" ng-click="edit()"></i>&nbsp;&nbsp;&nbsp;
            <i class="fa fa-share-alt" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;
            <!--
            <onoffbutton b="selected.locked" class="pull-right"></onoffbutton>
            -->
            <button type="button" class="btn btn-primary pull-right" ng-click="execute()">
                <i class="fa fa-play-circle" aria-hidden="true"></i>
                Execute
            </button>
        </h2>
        <h2 class="appdata-name" style="border-bottom: 1px solid #eee">
            {{appdata.name}}
        </h2>
    </div><!--container-->
</div><!--fixed-top-->
<div class="container" style="margin-top: 110px">
    <div class="pull-right">
        <span class="text-muted">Publisher</span> <scaprofile id="appdata.user_id"></scaprofile><br>
        <time><span class="text-muted">Published on</span> {{appdata.create_date|date}}</time><br>
    </div>
    <p>{{appdata.desc}}</p>

    <div class="section">
        <h3>Dataset</h3>
        <h4>{{appdata.dataset_id.name}}</h4>
        <p>{{appdata.dataset_id.desc}}</p>
        <div ng-repeat="file in appdata.dataset_id.config.files" class="file" ng-click="download(file)">
            <p>
                <i class="fa fa-file file-icon" aria-hidden="true"></i> 
                {{file.filename}} 
                <span class="pull-right">{{file.size|bytes}}</span>
            </p>
            <!--
            <div class="pull-right text-muted">
                <i class="fa fa-trash-o" aria-hidden="true"></i>
            </div>
            -->
            <p style="margin-left: 20px;" class="text-muted">
                <small><b>{{file.mime}}</b> {{file.desc}}</small>
                <!--{{file.dir}}-->
            </p>
        </div>
        <p class="help-block pull-right">Click files above to download or 
            <button type="button" class="btn btn-xs btn-default">
                <i class="fa fa-cloud-download" aria-hidden="true"></i> Download All
            </button>
        </p>
        <br clear="both">
    </div>

    <div class="section">
        <h3>Application</h3>
        <apptype type="appdata.application_id.config.type" class="pull-right"></apptype>
        <h4>{{appdata.application_id.name}}</h4>
        <p>{{appdata.application_id.desc}}</p>

        <h3>Detail</h3>
        <div ng-if="appdata.application_id.config.type == 'bash'">
            <h4>Bash Script</h4>
            <p class="help-block">Following script will be executed on <strong>{{appdata.application_id.config.resource_type}}</strong></p>
            <div ui-ace="{
                mode: 'bash',
            }" readonly ng-model="appdata.application_id.config.bash"></div>
        </div>
        <div ng-if="appdata.application_id.config.type == 'dockerbuilder'">
            <h4>Dockerfile</h4>
            <div ui-ace="{
                mode: 'dockerfile',
            }" readonly ng-model="appdata.application_id.config.dockerfile"></div>
            
            <p class="help-block">Following command will be used to execute this docker container.</p>
            <pre style="font-family: 'monospace'; font-size: 70%;">docker build . -t onere/appdata_{{appdata.application_id._id}}
docker run --rm \
    -v /host/input:/input:ro \
    -v /host/output:/output \
    -u $UID:`id -g` \
    -d onere/appdata_{{appdata.application_id._id}} {{appdata.application_id.config.container_arg}}</pre>
        </div>
        <div ng-if="appdata.application_id.config.type == 'docker'">
            <h4>Docker Container</h4>
            <p class="help-block">Following command will be used to execute this docker container.</p>
            <pre style="font-family: 'monospace'; font-size: 70%;">docker run --rm \
    -v /host/input:/input:ro \
    -v /host/output:/output \
    -u $UID:`id -g` \
    -d {{appdata.application_id.config.container}} {{appdata.application_id.config.container_arg}}</pre>
        </div>

        <h3>Resource Type</h3>
        <p class="help-block">
            This application is designed to be executed on the following resource type.
            You need an account for this resource type in order to execute this app/data.</p>
        <blockquote><strong>{{appdata.application_id.config.resource_type}}</strong></blockquote>
    </div>
    
    <h3>Project</h3>
    <p class="help-block">This app/data belongs to following project</p>
    <h4>Test Project</h4>
    <div class="row">
    <div class="col-md-8">
        <p>The   open   neuroscience   embedded   reproducibility   environment   (ONERE).   We   propose   to  
    implement   open   science   embedded   hardware­software   environments   based   on   public   cloud  
    infrastructure   to   advance   the   scientific   reproducibility   of   neuroscience   research   and   extend   usage to   a   broader   base   of   neuroscience   researchers   and   students.   We   plan   to   use   software   abstraction, virtualization   and   containerization   technology   (virtual   machines   and   ​
    Docker   images)   to   develop mechanisms   to   publish   complete   neuroscience   software   environments   associated   with   published  articles.</p>
    </div>
    <div class="col-md-4">
        <h4 style="margin-top: 0px;">Project Members</h4>
        <ul class="onere-contacts">
            <li>
                Test User <a href="mailto:">&lt;test@example.org&gt;</a>
                <span class="label label-info">PI</span> 
            </li>
            <li>Soichi Hayashi <a href="mailtto:">&lt;hayashis@iu.edu&gt;</a></li>
            <li>John Doe <a href="mailto:">&lt;john@doe.org&gt;</a></li>
            <li>Dora Emon <a href="mailto:">&lt;dra@emon.edu&gt;</a></li>
        </ul>
    </div>
    </div><!--row-->

    <h3>Publication</h3>
    <p class="help-block">Output from this app/data is used in following publications.</p>
    <ul>
        <li>Emergence of orientation selectivity in the mammalian visual pathway.  Benjamin Scholl, Andrew Y.Y. Tan, Joe Corey and Nicholas J. Priebe.; J. Neurosci. 33(26):10616-10624.</li>
        <li>Touryan, J., Lau, B., & Dan, Y. (2002) Isolation of relevant visual features from random stimuli for cortical complex cells. Journal of Neuroscience 22(24):10811-8</li>
        <li>David SV, Vinje WE and Gallant JL (2004). Natural stimulus statistics alter the receptive field structure of V1 neurons. Journal of Neuroscience 24, 6991-7006.
</li>
    </ul>

    <p class="help-block">You can use following citation for this app/data.</p>
    <blockquote class="well">
        Doe, John. (2016); {{appdata.name}}. ONERE App/data.
        <small>doi:10.12345/onere.{{adddata._id}}</small>
    </blockquote>

    <div id="disqus_thread"></div>
                                    
    <div class="text-muted">
        <hr style="margin-top: 200px;">
        <h3>Debug</h3>
        <pre style="font-size: 60%;">{{appdata|json}}</pre>
    </div>
</div>
